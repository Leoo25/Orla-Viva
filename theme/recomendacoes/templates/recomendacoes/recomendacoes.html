{% extends 'base.html' %}
{% block titulo %}Recomendações{% endblock %}

{% block conteudo %}
<section class="min-h-screen w-full bg-gray-50 py-12 overflow-x-hidden">
  
  <div class="container mx-auto px-4 mb-10">
    <div class="border-l-4 border-blue-600 pl-6">
        <h2 class="text-4xl font-bold text-gray-900">Nossas Recomendações</h2>
        <p class="mt-2 text-lg text-gray-600">Experiências selecionadas para você.</p>
    </div>
  </div>

  {% for categoria in categorias_recomendacao %}
  <div class="mb-16 container mx-auto px-4">
    
    <div class="mb-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-3 w-3 rounded-full bg-blue-600 shadow-sm"></div>
        <h3 class="text-2xl font-bold text-gray-800">{{ categoria.nome }}</h3>
      </div>
      
      <div class="hidden md:flex gap-2">
         <button onclick="scrollCarousel('carousel-{{ categoria.pk }}', -320)" 
                 class="p-2 rounded-full bg-white text-gray-600 shadow-sm border border-gray-200 hover:bg-blue-50 hover:text-blue-600 transition-all">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
         </button>
         <button onclick="scrollCarousel('carousel-{{ categoria.pk }}', 320)" 
                 class="p-2 rounded-full bg-white text-gray-600 shadow-sm border border-gray-200 hover:bg-blue-50 hover:text-blue-600 transition-all">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
         </button>
      </div>
    </div>

    <div class="relative">
      <div id="carousel-{{ categoria.pk }}" 
           class="flex gap-6 overflow-x-auto scroll-smooth pb-10 px-2 snap-x snap-mandatory"
           style="scrollbar-width: none; -ms-overflow-style: none;">
        
        {% for rec in categoria.recomendacoes.all %} 
    
    <div style="background-color: red; color: white; padding: 10px; margin-bottom: 10px; z-index: 9999; position: relative;">
        DEBUG: {{ rec.nome }} (Se você lê isso, o erro é no Tailwind)
    </div>

    <a href="..."> ... </a>

{% empty %}
    <div style="background-color: yellow; padding: 20px;">
        DEBUG: Nenhuma recomendação encontrada nesta categoria.
    </div>
{% endfor %}
        
        <div class="w-4 shrink-0"></div>
      </div>
    </div>
  </div>
  {% empty %}
    <div class="text-center py-20">
        <p class="text-gray-500 text-xl">Nenhuma categoria encontrada.</p>
    </div>
  {% endfor %}

</section>

<script>
  function scrollCarousel(id, amount) {
    const container = document.getElementById(id);
    if (container) {
      container.scrollBy({ left: amount, behavior: 'smooth' });
    }
  }
</script>
{% endblock %}