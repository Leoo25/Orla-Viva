{% extends 'base.html' %}
{% load static %}

{% block titulo %}Meus Favoritos | Orla Viva{% endblock %}

{% block conteudo %}
<section class="min-h-screen bg-zinc-50 py-12">
    <div class="container mx-auto px-4">
        
        <h1 class="text-4xl font-bold text-zinc-900 mb-2">Meus Favoritos</h1>
        <p class="text-zinc-600 mb-12">Tudo que você amou em Praia Grande, salvo aqui.</p>

        <div class="mb-16">
            <h2 class="text-2xl font-bold text-zinc-800 mb-6 flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-[#FF0080]"></span>
                Eventos Salvos
            </h2>

            {% if eventos %}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {% for evento in eventos %}
                    <div class="group bg-white rounded-2xl shadow-sm border border-zinc-100 overflow-hidden hover:shadow-lg transition-all relative">
                        
                        <a href="{% url 'toggle_favorito_evento' evento.id %}" class="absolute top-3 right-3 z-20 p-2 rounded-full bg-white/90 hover:bg-red-50 text-red-500 shadow-sm transition-all" title="Remover dos favoritos">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                            </svg>
                        </a>

                        <a href="{{ evento.site_url|default:'#' }}" target="_blank" class="block">
                            <div class="relative h-48 bg-zinc-100">
                                {% if evento.imagem %}
                                    <img src="{{ evento.imagem.url }}" class="w-full h-full object-cover">
                                {% endif %}
                                <div class="absolute bottom-3 left-3 bg-white/90 px-2 py-1 rounded-lg text-xs font-bold shadow-sm">
                                    {{ evento.data|date:"d/m" }}
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg mb-1">{{ evento.nome }}</h3>
                                <p class="text-sm text-zinc-500 line-clamp-2">{{ evento.descricao }}</p>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-zinc-500 italic">Você ainda não favoritou nenhum evento.</p>
            {% endif %}
        </div>

        <div>
            <h2 class="text-2xl font-bold text-zinc-800 mb-6 flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-[#FFEA00]"></span>
                Recomendações Salvas
            </h2>

            {% if recomendacoes %}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {% for rec in recomendacoes %}
                    <div class="group bg-white rounded-2xl shadow-sm border border-zinc-100 overflow-hidden hover:shadow-lg transition-all relative">
                        
                        <a href="{% url 'toggle_favorito_recomendacao' rec.id %}" class="absolute top-3 right-3 z-20 p-2 rounded-full bg-white/90 hover:bg-red-50 text-red-500 shadow-sm transition-all" title="Remover dos favoritos">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                            </svg>
                        </a>

                        <a href="#" class="block"> 
                            <div class="relative h-48 bg-zinc-100">
                                {% if rec.imagem %}
                                    <img src="{{ rec.imagem.url }}" class="w-full h-full object-cover">
                                {% endif %}
                                <div class="absolute top-3 left-3 bg-zinc-900/80 text-white px-2 py-1 rounded text-xs font-bold">
                                    {{ rec.categoria.nome }}
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-bold text-lg mb-1">{{ rec.nome }}</h3>
                                <p class="text-sm text-zinc-500 line-clamp-2">{{ rec.descricao }}</p>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-zinc-500 italic">Nenhuma recomendação favoritada ainda.</p>
            {% endif %}
        </div>

    </div>
</section>
{% endblock %}